<!doctype html>
<html lang="de">
<head>
  <!-- Basis -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <base href="/Supersystem/">
  <title>Bookmarklet · SafeShare</title>
  <link rel="canonical" href="https://j-ai-71.github.io/Supersystem/bookmarklets.html">

  <!-- hreflang / Locale -->
  <link rel="alternate" href="https://j-ai-71.github.io/Supersystem/bookmarklets.html" hreflang="de">
  <link rel="alternate" href="https://j-ai-71.github.io/Supersystem/bookmarklets.html" hreflang="x-default">
  <meta property="og:locale" content="de_DE">

    <link rel="canonical" href="https://j-ai-71.github.io/Supersystem/…">
+  <meta http-equiv="Content-Security-Policy"
+        content="default-src 'self';
+                 base-uri 'self';
+                 frame-ancestors 'none';
+                 object-src 'none';
+                 img-src 'self' data:;
+                 style-src 'self' 'unsafe-inline';
+                 script-src 'self';
+                 font-src 'self';
+                 worker-src 'self';
+                 manifest-src 'self';
+                 connect-src 'self'">

  <!-- Meta -->
  <meta name="description" content="Bookmarklet „SafeShare clean“ zum schnellen Säubern der aktuellen Seite. Zieht es in die Lesezeichenleiste oder kopiert den Code.">

  <!-- Icons / Manifest -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-touch-icon-180.png?v=29">
  <link rel="apple-touch-icon" href="assets/icons/apple-touch-icon-180.png?v=29">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/icon-32-kreis.png?v=29">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/icon-16-kreis.png?v=29">
  <link rel="manifest" href="manifest.webmanifest?v=29">

  <!-- Fallback-Styles -->
  <style>
    :root{--bg:#0b0b0b;--fg:#eaeaea;--mut:#9a9a9a;--card:#121212;--line:#2a2a2a}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
    .wrap{max-width:980px;margin:0 auto;padding:22px 14px}
    h1{margin:.2em 0 .4em;font-size:1.9rem}
    h2{margin:1.1em 0 .3em;font-size:1.2rem}
    .mut{color:var(--mut)}
    .card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:14px;margin-top:12px}
    .row{display:flex;flex-wrap:wrap;gap:10px}
    .btn{display:inline-block;padding:.7rem 1rem;border-radius:10px;border:1px solid var(--line);background:#1b1b1b;color:#eaeaea;text-decoration:none;cursor:pointer}
    a{color:#cfe7ff}
    textarea, input[type=text]{width:100%;box-sizing:border-box;background:#0f0f0f;border:1px solid var(--line);color:#eaeaea;border-radius:10px;padding:12px}
    code,kbd{background:#0f0f0f;border:1px solid #2a2a2a;border-radius:6px;padding:.1rem .35rem}
    .drag{display:inline-block;padding:.5rem .9rem;border-radius:10px;border:1px dashed #3a3a3a;background:#161616;color:#eaeaea;text-decoration:none}
    .drag:active{opacity:.85}
    footer{margin-top:18px}
  </style>

  <!-- Optional Theme -->
  <link rel="stylesheet" href="css/theme.css?v=27">

  <!-- SW-Registrierung -->
  <script src="js/sw-register.js?v=29"></script>
</head>
<body>
  <div class="wrap">
    <h1>Bookmarklet „SafeShare clean“</h1>
    <p class="mut">Säubert die <em>aktuelle Seite</em> mit einem Klick: öffnet die SafeShare-App mit der aktiven URL und zeigt die bereinigte Adresse an.</p>

    <section class="card">
      <h2>Desktop (Chrome/Firefox/Edge)</h2>
      <p>Ziehe diesen Link in deine Lesezeichenleiste:</p>
      <p>
        <a id="dragLink" class="drag" href="#">SafeShare clean</a>
      </p>
      <p class="mut">Falls Drag&Drop blockiert ist: Rechtsklick → „Link zu Lesezeichen hinzufügen“.</p>
    </section>

    <section class="card">
      <h2>iPhone/iPad (Safari)</h2>
      <ol>
        <li>Tippe unten auf das Teilen-Symbol → <strong>„Lesezeichen“</strong> hinzufügen.</li>
        <li>Öffne danach deine Lesezeichen und <strong>bearbeite</strong> das neue Lesezeichen.</li>
        <li>Setze <em>Name</em> auf <strong>SafeShare clean</strong>.</li>
        <li>Kopiere den Code unten und füge ihn in das Feld <em>Adresse</em> ein (ersetzt die URL).</li>
      </ol>
      <div class="row">
        <button class="btn" type="button" onclick="copyCode()">Code kopieren</button>
        <a class="btn" href="help.html#bookmarklet">Anleitung öffnen</a>
      </div>
      <p class="mut">Hinweis: Der Name kann nicht per Code gesetzt werden; bitte beim Speichern „SafeShare clean“ eintragen.</p>
      <textarea id="bmCode" rows="4" readonly spellcheck="false"></textarea>
    </section>

    <section class="card">
      <h2>Test</h2>
      <p>Teste das Bookmarklet auf einer beliebigen Seite oder simuliere es hier:</p>
      <div class="row">
        <input id="testUrl" type="text" inputmode="url" placeholder="https://beispiel.de/?utm_source=x&gclid=123…" spellcheck="false" value="https://example.com/?utm_source=newsletter&gclid=TEST123">
        <button class="btn" type="button" onclick="simulate()">Mit Bookmarklet öffnen</button>
      </div>
    </section>

    <footer class="mut">
      <a href="index.html">Startseite</a> ·
      <a href="app.html">App</a> ·
      <a href="help.html">Hilfe</a> ·
      <a href="mailto:?subject=SafeShare%20Feedback&body=Bitte%20hier%20Feedback%20eintragen.">Feedback</a>
    </footer>
  </div>

  <script>
    // Absoluter App-Pfad (wichtig für Bookmarklet)
    const APP_URL = 'https://j-ai-71.github.io/Supersystem/app.html';

    // Bookmarklet-Code (nur Code, Name wird im Browser vergeben)
    const BOOKMARKLET = "javascript:(()=>{try{const u=location.href;location.href='" + APP_URL + "?url='+encodeURIComponent(u)}catch(e){alert('SafeShare: '+e)}})()";

    // Setze Link und Textarea
    const link = document.getElementById('dragLink');
    const ta   = document.getElementById('bmCode');
    link.href = BOOKMARKLET;
    ta.value  = BOOKMARKLET;

    function copyCode(){
      try{
        if (navigator.clipboard?.writeText) {
          navigator.clipboard.writeText(BOOKMARKLET);
        } else {
          ta.select(); document.execCommand('copy'); ta.blur();
        }
      } catch(e){}
    }

    function simulate(){
      const v = document.getElementById('testUrl').value.trim();
      if(!v) return;
      const target = APP_URL + '?url=' + encodeURIComponent(v);
      try { window.open(target, '_blank', 'noopener,noreferrer'); }
      catch { location.href = target; }
    }
  </script>

  <noscript><div class="wrap"><p class="mut">Hinweis: JavaScript ist deaktiviert. Die Bookmarklet-Seite benötigt JavaScript.</p></div></noscript>
</body>
</html>
