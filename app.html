<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>SafeShare App – Tracking-Parameter entfernen & Links aufräumen</title>
  <meta name="description" content="SafeShare App: Tracking-Parameter entfernen, Weiterleitungen entpacken und Links bereinigen – direkt im Browser, ohne Logins, ohne Abo.">

  <!-- Canonical -->
  <link rel="canonical" href="https://j-ai-71.github.io/Supersystem/app.html">

  <!-- Favicon -->
  <link rel="icon" href="logo.svg" type="image/svg+xml">

  <!-- Search Console / Bing -->
  <meta name="google-site-verification" content="KFkKxZrXyKiS_KzE0YwkYAeXoLNKtQGjbeg9ocdBiOY">
  <meta name="msvalidate.01" content="DEIN_BING_CODE_HIER">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="SafeShare App – Tracking-Parameter entfernen & Links aufräumen">
  <meta property="og:description" content="Bereinige Links vor dem Teilen: entferne Tracking-Parameter, entpacke Weiterleitungen und teile saubere Ziel-URLs – mit der SafeShare Web-App.">
  <meta property="og:url" content="https://j-ai-71.github.io/Supersystem/app.html">
  <meta property="og:site_name" content="SafeShare">
  <meta property="og:image" content="https://j-ai-71.github.io/Supersystem/logo.svg">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="SafeShare App – Tracking-Parameter entfernen & Links aufräumen">
  <meta name="twitter:description" content="Tracking-Parameter entfernen, Weiterleitungen entpacken und Links bereinigen – direkt im Browser, ohne Logins, ohne Abo.">
  <meta name="twitter:image" content="https://j-ai-71.github.io/Supersystem/logo.svg">

  <!-- Structured Data: SoftwareApplication -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "SafeShare App",
    "applicationCategory": "UtilitiesApplication",
    "operatingSystem": "Any",
    "description": "SafeShare ist eine Web-App, die hilft, Tracking-Parameter zu entfernen, Weiterleitungen zu entpacken und Links vor dem Teilen aufzuräumen – lokal im Browser.",
    "url": "https://j-ai-71.github.io/Supersystem/app.html",
    "publisher": {
      "@type": "Person",
      "name": "Jana Jergus"
    }
  }
  </script>

  <style>
    :root{
      --bg:#050810;
      --card:#0d111c;
      --text:#f5f7ff;
      --muted:#9aa4c6;
      --border:#1b2335;
      --accent:#3dd5b0;
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",sans-serif;
      background:radial-gradient(circle at top,#101626 0,#050810 55%,#020308 100%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
    }
    a{color:#8be5ca;text-decoration:none;}
    a:hover{text-decoration:underline;}
    header{
      position:sticky;top:0;z-index:20;
      backdrop-filter:blur(16px);
      background:linear-gradient(to bottom,rgba(5,8,16,.95),rgba(5,8,16,.85),transparent);
      border-bottom:1px solid rgba(36,46,78,.7);
    }
    .shell{max-width:880px;margin:0 auto;padding:0 18px;}
    .nav{
      display:flex;align-items:center;justify-content:space-between;
      padding:12px 0;font-size:13px;color:var(--muted);gap:10px;
    }
    .nav-left{display:flex;align-items:center;gap:8px;}
    .logo-mark{
      width:28px;height:28px;border-radius:999px;
      border:1px solid rgba(61,213,176,.5);
      background:radial-gradient(circle at 30% 0%,#f9eab0 0,#fbd2a7 14%,#ff9e9e 32%,#141827 100%);
      display:flex;align-items:center;justify-content:center;overflow:hidden;
    }
    .logo-mark img{width:22px;height:22px;object-fit:contain;}
    .logo-title{font-weight:600;font-size:15px;color:var(--text);}
    .nav-links{display:flex;gap:14px;flex-wrap:wrap;justify-content:flex-end;}
    .nav-links a{text-decoration:none;}
    @media(max-width:720px){.nav-links{display:none;}}

    main{padding:26px 0 40px;}
    h1{font-size:clamp(24px,4vw,30px);margin:0 0 10px;}
    h2{font-size:20px;margin:24px 0 10px;}
    h3{font-size:16px;margin:18px 0 6px;}
    p{font-size:14px;color:var(--muted);line-height:1.6;margin:0 0 10px;}
    ul,ol{font-size:14px;color:var(--muted);padding-left:20px;margin:6px 0 12px;}

    .card{
      background:rgba(9,14,30,.96);
      border-radius:16px;
      padding:18px 16px 16px;
      border:1px solid var(--border);
      margin-bottom:18px;
    }
    .badge{
      display:inline-flex;align-items:center;gap:6px;
      font-size:11px;padding:4px 9px;border-radius:999px;
      border:1px solid rgba(61,213,176,.5);
      background:rgba(5,11,24,.96);color:#ccefe4;
      margin-bottom:10px;
    }
    .badge-dot{
      width:7px;height:7px;border-radius:50%;
      background:#3dd5b0;box-shadow:0 0 10px rgba(61,213,176,.8);
    }
    .pill-row{display:flex;flex-wrap:wrap;gap:6px;margin:6px 0 8px;font-size:11px;}
    .pill{
      border-radius:999px;
      border:1px solid rgba(61,213,176,.6);
      padding:3px 9px;
      background:rgba(7,11,24,.98);
      color:var(--muted);
    }
    .btn-row{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px;}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      gap:6px;border-radius:999px;padding:8px 14px;
      font-size:13px;border:1px solid transparent;
      text-decoration:none;cursor:pointer;white-space:nowrap;
    }
    .btn-primary{
      background:linear-gradient(120deg,#3dd5b0,#ffc98b);
      color:#050810;font-weight:600;
    }
    .btn-ghost{
      border-color:rgba(99,110,160,.8);
      color:var(--muted);background:rgba(9,15,32,.9);
    }

    .input-group{margin-top:10px;}
    .input-label{
      font-size:12px;color:var(--muted);margin-bottom:4px;
      display:flex;justify-content:space-between;align-items:center;gap:8px;
    }
    .input-wrap{
      position:relative;
    }
    textarea,input[type="text"]{
      width:100%;
      background:#050814;
      border-radius:11px;
      border:1px solid rgba(55,69,110,.9);
      padding:9px 36px 9px 10px;
      font-size:14px;
      color:var(--text);
      font-family:inherit;
      resize:vertical;
      min-height:40px;
    }
    textarea:focus,input[type="text"]:focus{
      outline:none;
      border-color:var(--accent);
      box-shadow:0 0 0 1px rgba(61,213,176,.4);
    }
    .clear-btn{
      position:absolute;
      right:8px;top:50%;transform:translateY(-50%);
      width:20px;height:20px;border-radius:999px;
      border:1px solid rgba(90,100,150,.8);
      display:flex;align-items:center;justify-content:center;
      font-size:12px;color:var(--muted);
      background:rgba(6,10,22,.95);
      cursor:pointer;
    }
    .clear-btn:hover{border-color:var(--accent);color:var(--accent);}

    .options-row{
      display:flex;flex-wrap:wrap;gap:10px;
      font-size:12px;color:var(--muted);margin-top:10px;
    }
    .options-row label{display:inline-flex;align-items:center;gap:5px;cursor:pointer;}
    .options-row input[type="checkbox"]{accent-color:var(--accent);}

    .result-box{
      margin-top:12px;
      border-radius:12px;
      border:1px dashed rgba(68,83,132,.9);
      padding:10px 10px 8px;
      background:rgba(4,8,18,.95);
      font-size:13px;
    }
    .result-label{
      font-size:12px;color:var(--muted);margin-bottom:4px;
      display:flex;justify-content:space-between;align-items:center;gap:8px;
    }
    .result-url{
      word-break:break-all;
      font-family:ui-monospace,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      font-size:12px;color:var(--text);
    }
    .result-actions{
      display:flex;flex-wrap:wrap;gap:8px;margin-top:6px;
    }
    .btn-small{
      font-size:12px;padding:5px 10px;border-radius:999px;
      border:1px solid rgba(68,83,132,.9);background:rgba(6,11,24,.98);
      color:var(--muted);cursor:pointer;
    }
    .btn-small:hover{border-color:var(--accent);color:var(--accent);}
    .status-line{
      margin-top:6px;font-size:11px;color:var(--muted);
    }
    .status-line strong{color:var(--text);}

    footer{
      border-top:1px solid rgba(36,46,78,.7);
      padding:14px 0 22px;font-size:11px;
      color:var(--muted);margin-top:10px;
    }
    .footer-row{
      max-width:880px;margin:0 auto;padding:0 18px;
      display:flex;justify-content:space-between;
      gap:10px;flex-wrap:wrap;
    }
    .footer-links{display:flex;flex-wrap:wrap;gap:10px;}
  </style>
</head>
<body>
<header>
  <div class="shell">
    <div class="nav">
      <div class="nav-left">
        <div class="logo-mark"><img src="logo.svg" alt="SafeShare Logo"></div>
        <div class="logo-title">SafeShare</div>
      </div>
      <nav class="nav-links">
        <a href="index.html">Startseite</a>
        <a href="utm-parameter-entfernen.html">UTM-Guide</a>
        <a href="tracking-parameter-entfernen.html">Tracking-Parameter</a>
        <a href="url-cleaner-tool-vergleich.html">URL-Cleaner-Vergleich</a>
        <a href="help.html">Hilfe</a>
        <a href="pro.html">Pro</a>
      </nav>
    </div>
  </div>
</header>

<main>
  <div class="shell">

    <!-- Haupt-App-Karte -->
    <article class="card">
      <div class="badge"><span class="badge-dot"></span> Web-App</div>
      <h1>SafeShare App – Links aufräumen vor dem Teilen</h1>
      <p>
        Füge einen Link ein, entferne Tracking-Parameter und entpacke – soweit möglich –
        typische Weiterleitungen. Das passiert lokal in deinem Browser. Kein Login, kein
        Konto, kein Abo.
      </p>
      <div class="pill-row">
        <span class="pill">Tracking-Parameter entfernen</span>
        <span class="pill">Weiterleitungen entpacken (soweit möglich)</span>
        <span class="pill">lokale Verarbeitung im Browser</span>
      </div>

      <div class="input-group">
        <div class="input-label">
          <span>1) Link einfügen</span>
          <span>z. B. aus Newsletter, Social, Messenger …</span>
        </div>
        <div class="input-wrap">
          <textarea id="input-url" placeholder="Hier deinen Link einfügen …"></textarea>
          <button type="button" class="clear-btn" id="clear-input" aria-label="Eingabe löschen">×</button>
        </div>
      </div>

      <div class="options-row">
        <label>
          <input type="checkbox" id="option-unpack" checked>
          Weiterleitungen aus typischen Redirect-Parametern entpacken (z. B. <code>url=</code>, <code>u=</code>)
        </label>
        <label>
          <input type="checkbox" id="option-strip-hash" checked>
          offensichtliche Tracking-Fragmente im <code>#</code>-Teil entfernen (soweit erkennbar)
        </label>
      </div>

      <div class="btn-row">
        <button type="button" class="btn btn-primary" id="clean-btn">
          Tracking-Parameter jetzt entfernen
        </button>
        <button type="button" class="btn btn-ghost" id="demo-btn">
          Beispiel-Link einsetzen
        </button>
      </div>

      <div id="result-container" class="result-box" style="display:none;">
        <div class="result-label">
          <span>2) Bereinigter Link</span>
          <span id="change-indicator"></span>
        </div>
        <div class="result-url" id="output-url"></div>
        <div class="result-actions">
          <button type="button" class="btn-small" id="copy-btn">Link kopieren</button>
          <button type="button" class="btn-small" id="open-btn">Link in neuem Tab öffnen</button>
        </div>
        <div class="status-line" id="status-line"></div>
      </div>

      <div class="status-line" id="error-line" style="margin-top:10px;"></div>
    </article>

    <!-- CTA-Block: Pro-Hinweis -->
    <section class="card" style="margin-top:18px;">
      <h2>Mehr Möglichkeiten mit SafeShare Pro</h2>
      <p>
        Wenn du regelmäßig mit vielen Links arbeitest oder eigene Regeln für
        Tracking-Parameter festlegen möchtest, kannst du SafeShare Pro nutzen.
      </p>
      <ul>
        <li>Tracking-Parameter wie <code>utm_*</code>, <code>gclid</code>, <code>fbclid</code> gezielt entfernen</li>
        <li>Weiterleitungen von Newsletter-Tools, Kurzlinks &amp; Kampagnen entpacken</li>
        <li>eigene Präferenzen für Link-Hygiene definieren</li>
        <li>geeignet für Selbstständige, Creator &amp; kleine Teams</li>
      </ul>
      <div class="btn-row">
        <a class="btn btn-primary" href="pro.html">
          SafeShare Pro ansehen
        </a>
        <a class="btn btn-ghost" href="utm-parameter-entfernen.html">
          Mehr über UTM-Parameter erfahren
        </a>
      </div>
    </section>

  </div>
</main>

<footer>
  <div class="footer-row">
    <div>© SafeShare – Jana Jergus</div>
    <div class="footer-links">
      <a href="index.html">Startseite</a>
      <a href="pro.html">Pro</a>
      <a href="help.html">Hilfe</a>
      <a href="impressum.html">Impressum</a>
      <a href="datenschutz.html">Datenschutz</a>
      <a href="terms.html">Terms</a>
    </div>
  </div>
</footer>

<script>
  (function(){
    const inputEl = document.getElementById('input-url');
    const clearBtn = document.getElementById('clear-input');
    const cleanBtn = document.getElementById('clean-btn');
    const demoBtn  = document.getElementById('demo-btn');

    const resultBox = document.getElementById('result-container');
    const outputEl  = document.getElementById('output-url');
    const copyBtn   = document.getElementById('copy-btn');
    const openBtn   = document.getElementById('open-btn');
    const statusLine = document.getElementById('status-line');
    const errorLine  = document.getElementById('error-line');
    const changeIndicator = document.getElementById('change-indicator');

    const unpackCheckbox = document.getElementById('option-unpack');
    const stripHashCheckbox = document.getElementById('option-strip-hash');

    function isProbablyUrl(text){
      if(!text) return false;
      const t = text.trim();
      return t.startsWith('http://') ||
             t.startsWith('https://') ||
             t.startsWith('www.');
    }

    function normalizeUrl(text){
      const t = text.trim();
      if(!t) return null;
      let candidate = t;
      if(!/^https?:\/\//i.test(candidate)){
        candidate = 'https://' + candidate;
      }
      try{
        return new URL(candidate);
      }catch(e){
        return null;
      }
    }

    function isTrackingParam(name){
      if(!name) return false;
      const n = name.toLowerCase();

      if(n.startsWith('utm_')) return true;

      const known = [
        'gclid','fbclid','dclid','mc_cid','mc_eid',
        'vero_conv','vero_id','oly_anon_id','oly_enc_id',
        'igshid','wsid','yclid','twclid','rb_clickid',
        'ml_subscriber','ml_subscriber_hash'
      ];
      if(known.indexOf(n) !== -1) return true;

      const patterns = ['pk_', 'piwik_', 'ga_'];
      for(const p of patterns){
        if(n.startsWith(p)) return true;
      }

      return false;
    }

    function unwrapRedirect(url){
      let current = url;
      const maxHops = 3;

      for(let i=0; i<maxHops; i++){
        let found = null;
        const params = current.searchParams;

        const keys = ['url','u','redirect','redir','r','destination','dest','to','goto','q'];
        for(const key of keys){
          if(params.has(key)){
            const val = params.get(key);
            if(val && /^https?:\/\//i.test(val.trim())){
              found = val.trim();
              break;
            }
          }
        }

        if(!found) break;

        try{
          current = new URL(found);
        }catch(e){
          break;
        }
      }

      return current;
    }

    function stripTrackingFromHash(url){
      if(!url.hash) return;

      let h = url.hash;
      if(h.startsWith('#')) h = h.slice(1);

      if(!h) return;

      const parts = h.split(/[&;]/);
      const keep = [];
      let removedAny = false;

      for(const part of parts){
        if(!part) continue;
        const eqIndex = part.indexOf('=');
        if(eqIndex === -1){
          keep.push(part);
          continue;
        }
        const name = decodeURIComponent(part.slice(0, eqIndex));
        const value = part.slice(eqIndex+1);
        if(isTrackingParam(name) || /^(?:fbclid|gclid|utm_)/i.test(name)){
          removedAny = true;
          continue;
        }
        keep.push(name + '=' + value);
      }

      if(removedAny){
        url.hash = keep.length ? ('#' + keep.join('&')) : '';
      }
    }

    function cleanUrlString(input, options){
      let url = normalizeUrl(input);
      if(!url){
        throw new Error('Die Eingabe sieht nicht wie ein gültiger Link aus.');
      }

      const original = url.href;

      if(options.unwrap){
        url = unwrapRedirect(url);
      }

      const params = url.searchParams;
      let removedCount = 0;

      // Kopie der keys, sonst iterierst du über sich ändernde Map
      const keys = [];
      params.forEach((v,k) => keys.push(k));

      for(const key of keys){
        if(isTrackingParam(key)){
          params.delete(key);
          removedCount++;
        }
      }

      if(options.stripHash){
        stripTrackingFromHash(url);
      }

      const cleaned = url.href;
      return {
        original,
        cleaned,
        removedCount,
        changed: cleaned !== original
      };
    }

    function setError(msg){
      errorLine.textContent = msg || '';
      if(msg){
        errorLine.style.color = '#ff9e9e';
      }else{
        errorLine.style.color = 'var(--muted)';
      }
    }

    function setStatus(msg){
      statusLine.textContent = msg || '';
    }

    function clearResult(){
      resultBox.style.display = 'none';
      outputEl.textContent = '';
      setStatus('');
      changeIndicator.textContent = '';
    }

    function handleClean(){
      setError('');
      clearResult();

      const raw = inputEl.value.trim();
      if(!raw){
        setError('Bitte zuerst einen Link einfügen.');
        return;
      }

      // Falls jemand mehrere Zeilen einfügt: nimm die erste URL-artige Zeile
      let candidate = raw;
      const lines = raw.split(/\r?\n/).map(l => l.trim()).filter(Boolean);
      if(lines.length > 1){
        const urlish = lines.find(isProbablyUrl);
        if(urlish){
          candidate = urlish;
        }
      }

      try{
        const result = cleanUrlString(candidate, {
          unwrap: unpackCheckbox.checked,
          stripHash: stripHashCheckbox.checked
        });

        outputEl.textContent = result.cleaned;
        resultBox.style.display = 'block';

        if(result.changed){
          changeIndicator.textContent = 'Link wurde bereinigt.';
        }else{
          changeIndicator.textContent = 'Link war bereits weitgehend sauber.';
        }

        const parts = [];
        if(result.removedCount > 0){
          parts.push(result.removedCount + ' Tracking-Parameter entfernt');
        }
        if(result.cleaned !== result.original){
          parts.push('Weiterleitung/Struktur angepasst (soweit möglich)');
        }
        if(parts.length === 0){
          parts.push('Keine offensichtlichen Tracking-Parameter gefunden.');
        }
        setStatus(parts.join(' · '));

      }catch(e){
        setError(e.message || 'Der Link konnte nicht verarbeitet werden.');
      }
    }

    function handleCopy(){
      const text = outputEl.textContent.trim();
      if(!text){
        return;
      }
      if(navigator.clipboard && navigator.clipboard.writeText){
        navigator.clipboard.writeText(text).then(function(){
          setStatus('Bereinigter Link wurde in die Zwischenablage kopiert.');
        }).catch(function(){
          setStatus('Konnte den Link nicht in die Zwischenablage kopieren.');
        });
      }else{
        // Fallback
        const tmp = document.createElement('textarea');
        tmp.value = text;
        tmp.style.position = 'fixed';
        tmp.style.left = '-9999px';
        document.body.appendChild(tmp);
        tmp.select();
        try{
          document.execCommand('copy');
          setStatus('Bereinigter Link wurde in die Zwischenablage kopiert.');
        }catch(err){
          setStatus('Konnte den Link nicht in die Zwischenablage kopieren.');
        }
        document.body.removeChild(tmp);
      }
    }

    function handleOpen(){
      const text = outputEl.textContent.trim();
      if(!text){
        return;
      }
      try{
        window.open(text, '_blank', 'noopener');
      }catch(e){
        setStatus('Konnte den Link nicht im neuen Tab öffnen.');
      }
    }

    function handleDemo(){
      const example = 'https://www.beispiel.de/artikel?utm_source=newsletter&utm_medium=email&utm_campaign=herbst&fbclid=XYZ123#section';
      inputEl.value = example;
      clearResult();
      setError('');
    }

    clearBtn.addEventListener('click', function(){
      inputEl.value = '';
      inputEl.focus();
      clearResult();
      setError('');
    });

    cleanBtn.addEventListener('click', handleClean);
    demoBtn.addEventListener('click', handleDemo);
    copyBtn.addEventListener('click', handleCopy);
    openBtn.addEventListener('click', handleOpen);

    inputEl.addEventListener('keydown', function(e){
      if((e.metaKey || e.ctrlKey) && e.key === 'Enter'){
        e.preventDefault();
        handleClean();
      }
    });
  })();
</script>
</body>
</html>
