<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>SafeShare App – Tracking-Parameter aus einem Link entfernen</title>
  <meta name="description" content="SafeShare Web-App: Tracking-Parameter aus einem Link entfernen, Weiterleitungen entpacken und einen bereinigten Link zum Teilen erhalten.">

  <!-- Canonical -->
  <link rel="canonical" href="https://j-ai-71.github.io/Supersystem/app.html">

  <!-- Favicon -->
  <link rel="icon" href="logo.svg" type="image/svg+xml">

  <!-- Search Console / Bing -->
  <meta name="google-site-verification" content="KFkKxZrXyKiS_KzE0YwkYAeXoLNKtQGjbeg9ocdBiOY">
  <meta name="msvalidate.01" content="7BD74FEEFCA9C7B540613485C050EFF8">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="SafeShare App – Tracking-Parameter aus einem Link entfernen">
  <meta property="og:description" content="Ein Link rein, ein bereinigter Link raus – Tracking-Parameter entfernen und Weiterleitungen sichtbar machen mit der SafeShare Web-App.">
  <meta property="og:url" content="https://j-ai-71.github.io/Supersystem/app.html">
  <meta property="og:site_name" content="SafeShare">
  <meta property="og:image" content="https://j-ai-71.github.io/Supersystem/social-preview.svg">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="SafeShare App – Tracking-Parameter aus einem Link entfernen">
  <meta name="twitter:description" content="Tracking-Parameter aus Links entfernen, direkt im Browser – ohne Konto, ohne Installation.">
  <meta name="twitter:image" content="https://j-ai-71.github.io/Supersystem/social-preview.svg">

  <!-- SoftwareApplication JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "SafeShare Web-App",
    "applicationCategory": "SecurityApplication",
    "operatingSystem": "Any",
    "description": "Web-App zur Bereinigung einzelner Links: Tracking-Parameter entfernen, sichtbare Weiterleitungen entschachteln und einen bereinigten Link zum Teilen erzeugen.",
    "url": "https://j-ai-71.github.io/Supersystem/app.html",
    "image": "https://j-ai-71.github.io/Supersystem/social-preview.svg",
    "publisher": {
      "@type": "Person",
      "name": "Jana Jergus"
    },
    "offers": [
      {
        "@type": "Offer",
        "name": "SafeShare Pro Person",
        "url": "https://payhip.com/b/VDm3B"
      },
      {
        "@type": "Offer",
        "name": "SafeShare Pro Team",
        "url": "https://payhip.com/b/Yxh5T"
      }
    ]
  }
  </script>

  <style>
    :root{
      --bg:#050810;
      --card:#0d111c;
      --text:#f5f7ff;
      --muted:#9aa4c6;
      --border:#1b2335;
      --accent:#3dd5b0;
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"SF Pro Text","Segoe UI",sans-serif;
      background:radial-gradient(circle at top,#101626 0,#050810 55%,#020308 100%);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
    }
    a{color:#8be5ca;text-decoration:none;}
    a:hover{text-decoration:underline;}
    header{
      position:sticky;top:0;z-index:20;
      backdrop-filter:blur(16px);
      background:linear-gradient(to bottom,rgba(5,8,16,.95),rgba(5,8,16,.85),transparent);
      border-bottom:1px solid rgba(36,46,78,.7);
    }
    .shell{max-width:980px;margin:0 auto;padding:0 18px;}
    .nav{
      display:flex;align-items:center;justify-content:space-between;
      padding:12px 0;font-size:13px;color:var(--muted);gap:10px;
    }
    .nav-left{display:flex;align-items:center;gap:8px;}
    .logo-mark{
      width:28px;height:28px;border-radius:999px;
      border:1px solid rgba(61,213,176,.5);
      background:radial-gradient(circle at 30% 0%,#f9eab0 0,#fbd2a7 14%,#ff9e9e 32%,#141827 100%);
      display:flex;align-items:center;justify-content:center;overflow:hidden;
    }
    .logo-mark img{width:22px;height:22px;object-fit:contain;}
    .logo-title{font-weight:600;font-size:15px;color:var(--text);}
    .nav-links{display:flex;gap:12px;flex-wrap:wrap;justify-content:flex-end;}
    .nav-links a{text-decoration:none;}
    @media(max-width:780px){.nav-links{display:none;}}

    main{padding:26px 0 40px;}
    h1{font-size:clamp(24px,4.5vw,30px);margin:0 0 10px;}
    h2{font-size:20px;margin:20px 0 10px;}
    p{font-size:14px;color:var(--muted);line-height:1.6;margin:0 0 10px;}

    .card{
      background:rgba(9,14,30,.96);
      border-radius:16px;
      padding:18px 16px 16px;
      border:1px solid var(--border);
      margin-bottom:18px;
    }
    .badge{
      display:inline-flex;align-items:center;gap:6px;
      font-size:11px;padding:4px 9px;border-radius:999px;
      border:1px solid rgba(61,213,176,.5);
      background:rgba(5,11,24,.96);color:#ccefe4;
      margin-bottom:10px;
    }
    .badge-dot{
      width:7px;height:7px;border-radius:50%;
      background:#3dd5b0;box-shadow:0 0 10px rgba(61,213,176,.8);
    }
    .btn-row{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px;}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;
      gap:6px;border-radius:999px;padding:8px 14px;
      font-size:13px;border:1px solid transparent;
      text-decoration:none;cursor:pointer;white-space:nowrap;
    }
    .btn-primary{
      background:linear-gradient(120deg,#3dd5b0,#ffc98b);
      color:#050810;font-weight:600;
    }
    .btn-ghost{
      border-color:rgba(99,110,160,.8);
      color:var(--muted);background:rgba(9,15,32,.9);
    }

    .input-label{
      font-size:12px;color:var(--muted);margin-bottom:4px;
      display:flex;justify-content:space-between;gap:8px;
    }
    .input-wrap{position:relative;}
    textarea{
      width:100%;
      background:#050814;
      border-radius:11px;
      border:1px solid rgba(55,69,110,.9);
      padding:9px 36px 9px 10px;
      font-size:14px;
      color:var(--text);
      font-family:inherit;
      resize:vertical;
      min-height:60px;
    }
    textarea:focus{
      outline:none;
      border-color:var(--accent);
      box-shadow:0 0 0 1px rgba(61,213,176,.4);
    }
    .clear-btn{
      position:absolute;
      right:8px;top:50%;transform:translateY(-50%);
      width:20px;height:20px;border-radius:999px;
      border:1px solid rgba(90,100,150,.8);
      display:flex;align-items:center;justify-content:center;
      font-size:12px;color:var(--muted);
      background:rgba(6,10,22,.95);
      cursor:pointer;
    }

    .options{
      display:flex;flex-wrap:wrap;gap:10px;
      margin-top:8px;font-size:12px;color:var(--muted);
    }
    .opt{
      display:inline-flex;align-items:center;gap:6px;
      padding:4px 8px;border-radius:999px;
      border:1px solid rgba(55,69,110,.9);
      background:rgba(7,11,24,.98);
    }
    .opt input{margin:0;}

    .result-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:10px;
      margin-top:10px;
    }
    .result-box{
      border-radius:12px;
      border:1px solid rgba(44,57,103,.9);
      padding:10px 10px 8px;
      background:rgba(7,11,24,.98);
      font-size:13px;
    }
    .result-label{
      font-size:12px;color:var(--muted);margin-bottom:4px;
    }
    .result-url{
      word-break:break-all;
      font-family:ui-monospace,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      font-size:12px;color:var(--text);
    }
    .result-actions{
      display:flex;flex-wrap:wrap;gap:8px;margin-top:8px;
    }
    .btn-small{
      font-size:11px;padding:5px 10px;border-radius:999px;
      border:1px solid rgba(68,83,132,.9);background:rgba(6,11,24,.98);
      color:var(--muted);cursor:pointer;
    }
    .btn-small:hover{border-color:var(--accent);color:var(--accent);}
    #error-line{font-size:12px;margin-top:8px;}
    #status-line{font-size:12px;margin-top:6px;color:var(--muted);}

    footer{
      border-top:1px solid rgba(36,46,78,.7);
      padding:14px 0 22px;font-size:11px;
      color:var(--muted);margin-top:10px;
    }
    .footer-row{
      max-width:980px;margin:0 auto;padding:0 18px;
      display:flex;justify-content:space-between;
      gap:10px;flex-wrap:wrap;
    }
    .footer-links{display:flex;flex-wrap:wrap;gap:10px;}
  </style>
</head>
<body>
<header>
  <div class="shell">
    <div class="nav">
      <div class="nav-left">
        <div class="logo-mark"><img src="logo.svg" alt="SafeShare Logo"></div>
        <div class="logo-title">SafeShare</div>
      </div>
      <nav class="nav-links">
        <a href="index.html">Startseite</a>
        <a href="app.html">App</a>
        <a href="bookmarklets.html">Bookmarklets</a>
        <a href="utm-parameter-entfernen.html">UTM-Guide</a>
        <a href="tracking-parameter-entfernen.html">Tracking-Parameter</a>
        <a href="url-cleaner-tool-vergleich.html">URL-Cleaner-Vergleich</a>
        <a href="redirect-entschachteln.html">Weiterleitungen</a>
        <a href="link-health.html">Link-Health</a>
        <a href="help.html">Hilfe</a>
        <a href="pro.html">Pro</a>
      </nav>
    </div>
  </div>
</header>

<main>
  <div class="shell">

    <section class="card">
      <div class="badge"><span class="badge-dot"></span> SafeShare App</div>
      <h1>Ein Link rein, ein bereinigter Link raus</h1>
      <p>
        Füge unten einen Link ein. SafeShare entfernt typische Tracking-Parameter,
        versucht sichtbare Weiterleitungen zu erkennen und zeigt dir eine bereinigte
        URL, die du teilen oder weiterverarbeiten kannst.
      </p>
      <div class="input-label">
        <span>1) Link einfügen</span>
        <span>z. B. aus Mail, Messenger, Social …</span>
      </div>
      <div class="input-wrap">
        <textarea id="input-url" placeholder="Hier den kompletten Link einfügen …"></textarea>
        <button type="button" class="clear-btn" id="clear-input" aria-label="Eingabe löschen">×</button>
      </div>

      <div class="options">
        <label class="opt">
          <input type="checkbox" id="opt-redirect" checked>
          <span>eingebettete Weiterleitungen (url=, u=, redirect= …) erkennen</span>
        </label>
        <label class="opt">
          <input type="checkbox" id="opt-hash" checked>
          <span>offensichtliche Tracking-Parameter im Hash (#) mit aufräumen</span>
        </label>
      </div>

      <div class="btn-row">
        <button type="button" class="btn btn-primary" id="clean-btn">Link bereinigen</button>
        <button type="button" class="btn btn-ghost" id="demo-btn">Beispiellink einsetzen</button>
      </div>

      <div id="error-line"></div>
      <div id="status-line"></div>

      <div class="result-grid" id="result-grid" style="display:none;">
        <div class="result-box">
          <div class="result-label">Ausgangs-URL</div>
          <div class="result-url" id="original-url"></div>
        </div>
        <div class="result-box">
          <div class="result-label">Bereinigte URL</div>
          <div class="result-url" id="clean-url"></div>
          <div class="result-actions">
            <button type="button" class="btn-small" id="copy-btn">Bereinigte URL kopieren</button>
            <button type="button" class="btn-small" id="open-btn">Bereinigte URL öffnen</button>
          </div>
        </div>
      </div>
    </section>

    <section class="card">
      <h2>Was genau bereinigt wird?</h2>
      <p>
        SafeShare konzentriert sich auf typische Tracking-Parameter, z. B.:
      </p>
      <ul>
        <li><code>utm_source</code>, <code>utm_medium</code>, <code>utm_campaign</code> …</li>
        <li><code>gclid</code>, <code>fbclid</code>, <code>dclid</code>, <code>yclid</code></li>
        <li>Newsletter-IDs wie <code>mc_cid</code>, <code>mc_eid</code> und ähnliche Muster</li>
        <li>Analytics-Parameter mit Präfixen wie <code>pk_</code>, <code>piwik_</code></li>
      </ul>
      <p>
        Außerdem versucht SafeShare, in der URL selbst versteckte Weiterleitungen
        aufzudecken (z. B. <code>?url=https%3A%2F%2Fzielseite.de</code>). Für
        vollständige Redirect-Ketten oder Security-Analysen nutze zusätzlich
        <a href="redirect-entschachteln.html">Weiterleitungen entschachteln</a> und
        <a href="link-health.html">Link-Health Check</a>.
      </p>
    </section>

  </div>
</main>

<footer>
  <div class="footer-row">
    <div>© SafeShare – Jana Jergus</div>
    <div class="footer-links">
      <a href="index.html">Startseite</a>
      <a href="app.html">App</a>
      <a href="bookmarklets.html">Bookmarklets</a>
      <a href="pro.html">Pro</a>
      <a href="help.html">Hilfe</a>
      <a href="impressum.html">Impressum</a>
      <a href="datenschutz.html">Datenschutz</a>
      <a href="terms.html">Terms</a>
    </div>
  </div>
</footer>

<script>
(function(){
  const inputEl = document.getElementById('input-url');
  const clearBtn = document.getElementById('clear-input');
  const cleanBtn = document.getElementById('clean-btn');
  const demoBtn = document.getElementById('demo-btn');

  const optRedirect = document.getElementById('opt-redirect');
  const optHash = document.getElementById('opt-hash');

  const errorLine = document.getElementById('error-line');
  const statusLine = document.getElementById('status-line');
  const resultGrid = document.getElementById('result-grid');
  const originalUrlEl = document.getElementById('original-url');
  const cleanUrlEl = document.getElementById('clean-url');
  const copyBtn = document.getElementById('copy-btn');
  const openBtn = document.getElementById('open-btn');

  function setError(msg){
    errorLine.textContent = msg || '';
    errorLine.style.color = msg ? '#ff9e9e' : 'var(--muted)';
  }
  function setStatus(msg){
    statusLine.textContent = msg || '';
  }

  function normalizeInput(text){
    const t = text.trim();
    if(!t) return null;
    let candidate = t;
    const lines = t.split(/\r?\n/).map(l=>l.trim()).filter(Boolean);
    if(lines.length > 1){
      const urlish = lines.find(l => l.startsWith('http://') || l.startsWith('https://') || l.startsWith('www.'));
      if(urlish) candidate = urlish;
    }
    if(!/^https?:\/\//i.test(candidate)){
      candidate = 'https://' + candidate;
    }
    try{
      return new URL(candidate);
    }catch(e){
      return null;
    }
  }

  function isTrackingParam(name){
    if(!name) return false;
    const n = name.toLowerCase();
    if(n.startsWith('utm_')) return true;
    const list = [
      'gclid','fbclid','dclid','yclid','twclid',
      'mc_cid','mc_eid','vero_conv','vero_id',
      'igshid','rb_clickid','ml_subscriber','ml_subscriber_hash'
    ];
    if(list.indexOf(n) !== -1) return true;
    const patterns = ['pk_','piwik_','ga_'];
    for(const p of patterns){
      if(n.startsWith(p)) return true;
    }
    return false;
  }

  function unwrapRedirect(url){
    if(!optRedirect.checked) return url;
    try{
      const params = url.searchParams;
      const keys = ['url','u','redirect','redir','destination','dest','to','goto','q'];
      for(const key of keys){
        if(params.has(key)){
          const val = params.get(key);
          if(val && /^https?:\/\//i.test(val.trim())){
            return new URL(val.trim());
          }
        }
      }
    }catch(e){}
    return url;
  }

  function cleanHash(hash){
    if(!hash) return hash;
    if(!optHash.checked) return hash;
    const h = hash.replace(/^#/,'');
    if(!h) return '';
    const parts = h.split('&');
    const kept = [];
    for(const part of parts){
      const [key] = part.split('=');
      if(!key) continue;
      if(isTrackingParam(key)) continue;
      kept.push(part);
    }
    if(kept.length === 0) return '';
    return '#' + kept.join('&');
  }

  function cleanUrl(originalUrl){
    let url = originalUrl;
    url = unwrapRedirect(url);

    // Query bereinigen
    const params = url.searchParams;
    const toDelete = [];
    params.forEach((v,k) => {
      if(isTrackingParam(k)) toDelete.push(k);
    });
    toDelete.forEach(k => params.delete(k));

    const newHash = cleanHash(url.hash);
    url.hash = newHash;

    return url;
  }

  function handleClean(){
    setError('');
    setStatus('');
    resultGrid.style.display = 'none';
    originalUrlEl.textContent = '';
    cleanUrlEl.textContent = '';

    const raw = inputEl.value;
    if(!raw.trim()){
      setError('Bitte zuerst einen Link einfügen.');
      return;
    }
    const originalUrl = normalizeInput(raw);
    if(!originalUrl){
      setError('Die Eingabe sieht nicht wie eine gültige URL aus.');
      return;
    }

    const cleanedUrl = cleanUrl(new URL(originalUrl.href));
    originalUrlEl.textContent = originalUrl.href;
    cleanUrlEl.textContent = cleanedUrl.href;
    resultGrid.style.display = 'grid';

    if(cleanedUrl.href === originalUrl.href){
      setStatus('Es wurden keine typischen Tracking-Parameter oder sichtbaren Weiterleitungen gefunden.');
    }else{
      setStatus('Der Link wurde bereinigt. Prüfe bei wichtigen Zielen kurz, ob die Seite wie erwartet lädt.');
    }
  }

  function handleCopy(){
    const value = cleanUrlEl.textContent.trim();
    if(!value) return;
    if(navigator.clipboard && navigator.clipboard.writeText){
      navigator.clipboard.writeText(value).then(()=>{
        setStatus('Bereinigte URL wurde in die Zwischenablage kopiert.');
      }).catch(()=>{
        setStatus('Konnte die URL nicht automatisch kopieren – bitte manuell markieren.');
      });
    }else{
      setStatus('Dein Browser unterstützt die Clipboard-API nur eingeschränkt – bitte URL manuell kopieren.');
    }
  }

  function handleOpen(){
    const value = cleanUrlEl.textContent.trim();
    if(!value) return;
    try{
      window.open(value, '_blank', 'noopener');
    }catch(e){
      setStatus('Konnte die URL nicht in einem neuen Tab öffnen.');
    }
  }

  function handleDemo(){
    const example = 'https://newsletter.beispiel.de/track?url=https%3A%2F%2Fwww.zielseite.de%2Fangebot%3Futm_source%3Dnewsletter%26utm_medium%3Demail&gclid=TEST123';
    inputEl.value = example;
    setError('');
    setStatus('');
    resultGrid.style.display = 'none';
  }

  function handleClear(){
    inputEl.value = '';
    setError('');
    setStatus('');
    resultGrid.style.display = 'none';
    originalUrlEl.textContent = '';
    cleanUrlEl.textContent = '';
    inputEl.focus();
  }

  // ?url=-Parameter verarbeiten (z. B. vom Bookmarklet)
  function handleUrlParam(){
    try{
      const params = new URLSearchParams(window.location.search);
      if(!params.has('url')) return;
      const rawParam = params.get('url') || '';
      if(!rawParam) return;

      let decoded = rawParam;
      try{
        decoded = decodeURIComponent(rawParam);
      }catch(e){}
      inputEl.value = decoded;
      // Optional automatisch bereinigen:
      handleClean();
    }catch(e){
      // still
    }
  }

  cleanBtn.addEventListener('click', handleClean);
  copyBtn.addEventListener('click', handleCopy);
  openBtn.addEventListener('click', handleOpen);
  demoBtn.addEventListener('click', handleDemo);
  clearBtn.addEventListener('click', handleClear);

  // Enter im Textfeld: direkt bereinigen (wenn nur eine Zeile)
  inputEl.addEventListener('keydown', function(ev){
    if(ev.key === 'Enter' && (ev.metaKey || ev.ctrlKey)){
      ev.preventDefault();
      handleClean();
    }
  });

  // Beim Laden: ?url= auswerten (falls von Bookmarklet aufgerufen)
  handleUrlParam();
})();
</script>
</body>
</html>
