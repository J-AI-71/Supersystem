<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>SafeShare Pro App – mehrere Links auf einmal bereinigen</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="SafeShare Pro App: mehrere Links auf einmal bereinigen und eigene Regeln für Tracking-Parameter setzen – lokal im Browser, ohne Konto.">

  <link rel="canonical" href="https://j-ai-71.github.io/Supersystem/app-pro.html">

  <!-- Suchmaschinen-Verifikation -->
  <meta name="google-site-verification" content="KFkKxZrXyKiS_KzE0YwkYAeXoLNKtQGjbeg9ocdBiOY">
  <meta name="msvalidate.01" content="7BD74FEEFCA9C7B540613485C050EFF8">

  <!-- Diese Seite soll nicht in den Suchergebnissen auftauchen -->
  <meta name="robots" content="noindex, nofollow">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="SafeShare">
  <meta property="og:title" content="SafeShare Pro App – mehrere Links auf einmal bereinigen">
  <meta property="og:description" content="Mehrere Links auf einmal bereinigen und eigene Regeln für Tracking-Parameter setzen – lokal im Browser, ohne Konto.">
  <meta property="og:url" content="https://j-ai-71.github.io/Supersystem/app-pro.html">
  <meta property="og:image" content="https://j-ai-71.github.io/Supersystem/social-preview.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="SafeShare Pro App – mehrere Links auf einmal bereinigen">
  <meta name="twitter:description" content="Bulk-Reinigung und eigene Parameterregeln für Menschen, die intensiv mit Links arbeiten.">
  <meta name="twitter:image" content="https://j-ai-71.github.io/Supersystem/social-preview.png">

  <!-- JSON-LD: SoftwareApplication (Pro-App) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "@id": "https://j-ai-71.github.io/Supersystem/#safeshare-pro-app",
    "name": "SafeShare Pro App",
    "operatingSystem": "Web",
    "applicationCategory": "Utility",
    "description": "Die SafeShare Pro App erlaubt es, mehrere Links auf einmal zu bereinigen und eigene Regeln für Tracking-Parameter zu definieren – lokal im Browser, ohne Konto.",
    "url": "https://j-ai-71.github.io/Supersystem/app-pro.html",
    "image": "https://j-ai-71.github.io/Supersystem/social-preview.png",
    "creator": {
      "@type": "Person",
      "name": "Jana Jergus"
    }
  }
  </script>

  <!-- Layout / Styles -->
  <style>
    *,
    *::before,
    *::after { box-sizing: border-box; }

    :root {
      --bg: #020617;
      --border-subtle: #1f2933;
      --border-strong: #334155;
      --text: #e5e7eb;
      --text-muted: #94a3b8;
      --accent: #4adeb8;
      --accent-soft: rgba(74, 222, 184, 0.14);
      --accent-strong: #22c29b;
      --danger-soft: rgba(239, 68, 68, 0.14);
      --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
    }

    html, body {
      margin: 0;
      padding: 0;
      min-height: 100%;
    }

    body {
      font-family: var(--font-sans);
      background: radial-gradient(circle at top, #020617 0, #000 60%);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
    }

    a { color: var(--accent); text-decoration: none; }
    a:hover, a:focus-visible { text-decoration: underline; }

    .shell {
      max-width: 960px;
      margin: 0 auto;
      padding: 0 1.5rem 3.5rem;
    }

    .site-header {
      border-bottom: 1px solid var(--border-subtle);
      background: rgba(2, 6, 23, 0.9);
      backdrop-filter: blur(18px);
      position: sticky;
      top: 0;
      z-index: 20;
    }

    .site-header-inner {
      max-width: 960px;
      margin: 0 auto;
      padding: 0.85rem 1.5rem;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 0.75rem;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .brand-logo {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      border: 2px solid var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--accent);
    }

    .brand-text-main { font-weight: 600; letter-spacing: 0.04em; }
    .brand-text-sub { font-size: 0.78rem; color: var(--text-muted); }

    .nav {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      font-size: 0.9rem;
    }

    .nav a {
      padding: 0.3rem 0.75rem;
      border-radius: 999px;
      border: 1px solid transparent;
      color: var(--text-muted);
      white-space: nowrap;
    }

    .nav a[aria-current="page"] {
      color: var(--accent-strong);
      border-color: var(--accent-soft);
      background: rgba(15, 118, 110, 0.2);
    }

    .nav a:hover { color: var(--accent-strong); }

    @media (max-width: 720px) {
      .site-header-inner {
        flex-direction: column;
        align-items: flex-start;
      }
    }

    main { margin-top: 2rem; }

    .kicker {
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
    }

    h1 {
      font-size: clamp(1.9rem, 2.2vw + 1.4rem, 2.4rem);
      margin: 0 0 0.75rem;
    }

    h2 {
      font-size: 1.3rem;
      margin: 1.8rem 0 0.6rem;
    }

    h3 {
      font-size: 1.05rem;
      margin: 1.1rem 0 0.4rem;
    }

    p {
      line-height: 1.7;
      margin: 0 0 0.9rem;
    }

    .lead {
      font-size: 1.03rem;
      color: var(--text-muted);
      max-width: 54rem;
      margin-bottom: 1.2rem;
    }

    .grid {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.1fr);
      gap: 1.6rem;
      margin-top: 1.8rem;
    }

    @media (max-width: 900px) {
      .grid { grid-template-columns: minmax(0, 1fr); }
    }

    .card {
      border-radius: 1rem;
      border: 1px solid var(--border-subtle);
      background: radial-gradient(circle at top left, rgba(15, 23, 42, 0.95), rgba(15, 23, 42, 0.98));
      padding: 1.25rem 1.35rem 1.2rem;
    }

    textarea {
      width: 100%;
      min-height: 180px;
      border-radius: 0.75rem;
      border: 1px solid var(--border-subtle);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text);
      padding: 0.75rem 0.9rem;
      font: 0.92rem/1.5 var(--font-sans);
      resize: vertical;
    }

    textarea:focus-visible {
      outline: none;
      border-color: var(--accent-strong);
      box-shadow: 0 0 0 1px rgba(34, 194, 155, 0.6);
    }

    .field-label {
      font-size: 0.9rem;
      font-weight: 500;
      margin-bottom: 0.3rem;
    }

    .field-hint {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 0.4rem;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      align-items: center;
      margin: 0.9rem 0 0.5rem;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.6rem 1.2rem;
      border-radius: 999px;
      font-size: 0.9rem;
      font-weight: 500;
      border: 1px solid transparent;
      cursor: pointer;
      text-decoration: none;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-strong));
      color: #020617;
      box-shadow: 0 10px 30px rgba(15, 118, 110, 0.35);
    }

    .btn-secondary {
      border-color: var(--border-subtle);
      color: var(--text-muted);
      background: rgba(15, 23, 42, 0.9);
    }

    .btn-ghost {
      border-color: transparent;
      color: var(--text-muted);
      background: transparent;
      font-size: 0.82rem;
      padding-inline: 0.6rem;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: default;
      box-shadow: none;
    }

    .stats {
      font-size: 0.82rem;
      color: var(--text-muted);
    }

    .two-col-small {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 0.9rem;
      margin-top: 0.8rem;
    }

    @media (max-width: 720px) {
      .two-col-small { grid-template-columns: minmax(0, 1fr); }
    }

    .small-note {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 0.5rem;
    }

    .site-footer {
      border-top: 1px solid var(--border-subtle);
      padding: 1.25rem 1.5rem 1.75rem;
      margin-top: 3rem;
      color: var(--text-muted);
      font-size: 0.85rem;
      text-align: center;
      background: rgba(2, 6, 23, 0.96);
    }

    .site-footer a { color: var(--text-muted); }
    .site-footer a:hover { color: var(--accent); }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="site-header-inner">
      <div class="brand">
        <div class="brand-logo">8</div>
        <div>
          <div class="brand-text-main">SafeShare</div>
          <div class="brand-text-sub">Links ohne unnötiges Tracking</div>
        </div>
      </div>
      <nav class="nav" aria-label="Hauptnavigation">
        <a href="/Supersystem/index.html">Start</a>
        <a href="/Supersystem/app.html">App</a>
        <a href="/Supersystem/pro.html">Pro</a>
        <a href="/Supersystem/utm-parameter-entfernen.html">UTM entfernen</a>
        <a href="/Supersystem/tracking-parameter-entfernen.html">Tracking allgemein</a>
        <a href="/Supersystem/url-cleaner-tool-vergleich.html">Tool-Vergleich</a>
        <a href="/Supersystem/help.html">Hilfe</a>
      </nav>
    </div>
  </header>

  <div class="shell">
    <main>
      <div class="kicker">Pro-App</div>
      <h1>Mehrere Links auf einmal bereinigen &amp; eigene Regeln setzen</h1>
      <p class="lead">
        Diese Pro-App ist für Situationen gedacht, in denen du nicht nur einen Link, sondern gleich eine ganze
        Liste bereinigen möchtest – und in denen du eigene Regeln für bestimmte Parameter brauchst. Alles
        läuft lokal in deinem Browser, ohne Konto und ohne zentrale Speicherung.
      </p>

      <div class="grid">
        <!-- Link-Input / Output -->
        <section class="card" aria-labelledby="bulk-clean">
          <h2 id="bulk-clean">Bulk-Bereinigung: Ein Link pro Zeile</h2>
          <div class="field-label">Eingabe</div>
          <div class="field-hint">
            Füge hier mehrere Links ein – jeweils eine URL pro Zeile. Leere Zeilen werden ignoriert.
          </div>
          <textarea id="inputLinks" placeholder="https://example.com/?utm_source=newsletter&amp;utm_medium=email&amp;utm_campaign=launch
https://www.beispiel.de/artikel?utm_source=twitter&amp;utm_medium=social&amp;utm_campaign=promo&amp;gclid=ABC123
…"></textarea>

          <div class="controls">
            <button type="button" id="btnClean" class="btn btn-primary">
              Links bereinigen
            </button>
            <button type="button" id="btnCopyOutput" class="btn btn-secondary" disabled>
              Bereinigte Liste kopieren
            </button>
            <button type="button" id="btnClearInput" class="btn btn-ghost">
              Eingabe leeren
            </button>
            <button type="button" id="btnClearOutput" class="btn btn-ghost">
              Ausgabe löschen
            </button>
            <span id="stats" class="stats"></span>
          </div>

          <div class="field-label" style="margin-top:0.6rem;">Ausgabe</div>
          <div class="field-hint">
            Bereinigte Links – wieder eine URL pro Zeile. Du kannst sie direkt in Notizen, Docs oder Mails einfügen.
          </div>
          <textarea id="outputLinks" placeholder="Hier erscheinen nach der Bereinigung die sauberen Links." readonly></textarea>
        </section>

        <!-- Einstellungen / Regeln -->
        <section class="card" aria-labelledby="rules">
          <h2 id="rules">Eigene Regeln für Parameter</h2>
          <p>
            SafeShare entfernt bereits eine Reihe typischer Tracking-Parameter (UTM, gclid, fbclid, t_ref usw.).
            Hier kannst du das Verhalten für deine Arbeit anpassen – alles wird lokal im Browser gespeichert
            (localStorage), nicht auf einem Server.
          </p>

          <div class="two-col-small">
            <div>
              <div class="field-label">Zusätzliche Parameter immer entfernen</div>
              <div class="field-hint">
                Ein Name pro Zeile, z. B. <code>campaign</code> oder <code>session_id</code>. Diese werden zusätzlich
                zu den Standard-Tracking-Parametern entfernt.
              </div>
              <textarea id="extraRemove" placeholder="campaign
session_id"></textarea>
            </div>
            <div>
              <div class="field-label">Parameter, die du behalten möchtest (Whitelist)</div>
              <div class="field-hint">
                Ein Name pro Zeile, z. B. <code>aff_id</code>. Wenn ein Parameter hier steht, wird er nicht entfernt –
                selbst wenn er wie ein Tracking-Parameter aussieht.
              </div>
              <textarea id="whitelist" placeholder="aff_id"></textarea>
            </div>
          </div>

          <div class="controls" style="margin-top:0.7rem;">
            <button type="button" id="btnSaveRules" class="btn btn-secondary">
              Regeln speichern
            </button>
            <button type="button" id="btnResetRules" class="btn btn-ghost">
              Regeln zurücksetzen
            </button>
            <span id="rulesStatus" class="stats"></span>
          </div>

          <p class="small-note">
            Hinweis: Die Regeln gelten nur auf diesem Gerät und in diesem Browser. Wenn du einen anderen Browser
            nutzt oder den Speicher zurücksetzt, musst du die Listen ggf. neu eintragen.
          </p>
        </section>
      </div>
    </main>
  </div>

  <footer class="site-footer">
    <div>
      © SafeShare – Jana Jergus.
      <a href="/Supersystem/datenschutz.html">Datenschutz</a> ·
      <a href="/Supersystem/impressum.html">Impressum</a> ·
      <a href="/Supersystem/status.html">Status</a>
    </div>
  </footer>

  <script>
    // Basis-Tracking-Parameter, die SafeShare standardmäßig entfernt
    const BASE_TRACKING_PARAMS = [
      'utm_source','utm_medium','utm_campaign','utm_term','utm_content',
      'utm_id','utm_name',
      'gclid','fbclid','dclid','msclkid','twclid','li_fat_id',
      'mc_cid','mc_eid',
      'igshid',
      'vero_conv','vero_id',
      't_ref','ref','referrer'
    ];

    const STORAGE_KEYS = {
      remove: 'safeshareProExtraRemove',
      whitelist: 'safeshareProWhitelist'
    };

    const inputEl = document.getElementById('inputLinks');
    const outputEl = document.getElementById('outputLinks');
    const btnClean = document.getElementById('btnClean');
    const btnCopyOutput = document.getElementById('btnCopyOutput');
    const btnClearInput = document.getElementById('btnClearInput');
    const btnClearOutput = document.getElementById('btnClearOutput');
    const statsEl = document.getElementById('stats');

    const extraRemoveEl = document.getElementById('extraRemove');
    const whitelistEl = document.getElementById('whitelist');
    const btnSaveRules = document.getElementById('btnSaveRules');
    const btnResetRules = document.getElementById('btnResetRules');
    const rulesStatusEl = document.getElementById('rulesStatus');

    function parseLines(value) {
      return value
        .split(/\r?\n/)
        .map(v => v.trim())
        .filter(Boolean);
    }

    function normalizeNames(list) {
      return list.map(v => v.toLowerCase());
    }

    function loadRules() {
      try {
        const storedRemove = localStorage.getItem(STORAGE_KEYS.remove);
        const storedWhitelist = localStorage.getItem(STORAGE_KEYS.whitelist);
        if (storedRemove) {
          extraRemoveEl.value = JSON.parse(storedRemove).join('\n');
        }
        if (storedWhitelist) {
          whitelistEl.value = JSON.parse(storedWhitelist).join('\n');
        }
      } catch (e) {
        console.warn('Konnte gespeicherte Regeln nicht laden', e);
      }
    }

    function saveRules() {
      const extraRemove = parseLines(extraRemoveEl.value);
      const whitelist = parseLines(whitelistEl.value);

      try {
        localStorage.setItem(STORAGE_KEYS.remove, JSON.stringify(extraRemove));
        localStorage.setItem(STORAGE_KEYS.whitelist, JSON.stringify(whitelist));
        rulesStatusEl.textContent = 'Regeln gespeichert.';
      } catch (e) {
        console.warn('Konnte Regeln nicht speichern', e);
        rulesStatusEl.textContent = 'Regeln konnten nicht gespeichert werden.';
      }

      setTimeout(() => { rulesStatusEl.textContent = ''; }, 3000);
    }

    function resetRules() {
      extraRemoveEl.value = '';
      whitelistEl.value = '';
      try {
        localStorage.removeItem(STORAGE_KEYS.remove);
        localStorage.removeItem(STORAGE_KEYS.whitelist);
      } catch (e) {
        console.warn('Konnte Regeln nicht entfernen', e);
      }
      rulesStatusEl.textContent = 'Regeln zurückgesetzt.';
      setTimeout(() => { rulesStatusEl.textContent = ''; }, 3000);
    }

    function cleanUrl(raw, extraRemoveNames, whitelistNames) {
      let url;
      try {
        url = new URL(raw);
      } catch {
        // Wenn keine gültige URL, unverändert zurückgeben
        return { cleaned: raw, removedCount: 0 };
      }

      const params = url.searchParams;
      let removedCount = 0;

      const baseSet = new Set(BASE_TRACKING_PARAMS.map(p => p.toLowerCase()));
      const extraSet = new Set(extraRemoveNames);
      const whiteSet = new Set(whitelistNames);

      const keys = [];
      params.forEach((_, key) => { keys.push(key); });

      keys.forEach(key => {
        const lowerKey = key.toLowerCase();
        const isBase = baseSet.has(lowerKey);
        const isExtra = extraSet.has(lowerKey);
        const isWhite = whiteSet.has(lowerKey);

        if ((isBase || isExtra) && !isWhite) {
          params.delete(key);
          removedCount++;
        }
      });

      const search = params.toString();
      const cleaned =
        url.origin +
        url.pathname +
        (search ? '?' + search : '') +
        url.hash;

      return { cleaned, removedCount };
    }

    function cleanAllLinks() {
      const rawLines = parseLines(inputEl.value);
      if (!rawLines.length) {
        statsEl.textContent = 'Keine Links gefunden.';
        outputEl.value = '';
        btnCopyOutput.disabled = true;
        return;
      }

      statsEl.textContent = '…bereinigen läuft';
      btnClean.disabled = true;

      const extraRemove = normalizeNames(parseLines(extraRemoveEl.value));
      const whitelist = normalizeNames(parseLines(whitelistEl.value));

      const cleanedLines = [];
      let totalRemoved = 0;

      rawLines.forEach(line => {
        const { cleaned, removedCount } = cleanUrl(line, extraRemove, whitelist);
        cleanedLines.push(cleaned);
        totalRemoved += removedCount;
      });

      outputEl.value = cleanedLines.join('\n');
      btnCopyOutput.disabled = cleanedLines.length === 0;

      statsEl.textContent =
        rawLines.length + ' Link' + (rawLines.length === 1 ? '' : 's') +
        ' bereinigt · entfernte Parameter: ' + totalRemoved;

      btnClean.disabled = false;
    }

    async function copyOutput() {
      const text = outputEl.value.trim();
      if (!text) return;

      // Erst versuchen wir den modernen Clipboard-API-Weg
      if (navigator.clipboard && navigator.clipboard.writeText) {
        try {
          await navigator.clipboard.writeText(text);
          statsEl.textContent = 'Bereinigte Liste in die Zwischenablage kopiert.';
          setTimeout(() => { statsEl.textContent = ''; }, 3000);
          return;
        } catch (e) {
          console.warn('Clipboard API fehlgeschlagen, versuche Fallback.', e);
        }
      }

      // Fallback für Browser, die navigator.clipboard nicht unterstützen
      try {
        const tmp = document.createElement('textarea');
        tmp.value = text;
        tmp.style.position = 'fixed';
        tmp.style.left = '-9999px';
        document.body.appendChild(tmp);
        tmp.focus();
        tmp.select();
        const successful = document.execCommand('copy');
        document.body.removeChild(tmp);
        if (successful) {
          statsEl.textContent = 'Bereinigte Liste in die Zwischenablage kopiert.';
        } else {
          statsEl.textContent = 'Bitte Text manuell markieren und kopieren.';
        }
      } catch (e) {
        console.warn('Fallback-Kopieren fehlgeschlagen', e);
        statsEl.textContent = 'Bitte Text manuell markieren und kopieren.';
      }

      setTimeout(() => { statsEl.textContent = ''; }, 3000);
    }

    function clearInput() {
      inputEl.value = '';
      statsEl.textContent = '';
    }

    function clearOutput() {
      outputEl.value = '';
      btnCopyOutput.disabled = true;
      statsEl.textContent = '';
    }

    btnClean.addEventListener('click', cleanAllLinks);
    btnCopyOutput.addEventListener('click', copyOutput);
    btnClearInput.addEventListener('click', clearInput);
    btnClearOutput.addEventListener('click', clearOutput);
    btnSaveRules.addEventListener('click', saveRules);
    btnResetRules.addEventListener('click', resetRules);

    // Beim Laden: Regeln aus localStorage einlesen
    loadRules();
  </script>
</body>
</html>
