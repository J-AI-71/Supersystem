<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>SafeShare Pro – Aktivierung</title>
  <meta name="description" content="SafeShare Pro aktivieren: Lizenz-Key eingeben, Pro freischalten, Pro App öffnen. Local-first im Browser." />
  <meta name="robots" content="noindex,follow" />
  <meta name="color-scheme" content="dark light" />

  <!-- Google Search Console -->
  <meta name="google-site-verification" content="3-mi6zLHRdFC14-RdTIF6GY90jKWfyLNLsFBhGLqQB0" />
  <!-- Bing Webmaster Tools -->
  <meta name="msvalidate.01" content="B18ACE18875F9614DAA5CF69EED40ACE" />

  <style>
    :root{
      --bg0:#070a12; --bg1:#070b14; --bg2:#0b1020;
      --card:rgba(255,255,255,.06);
      --card2:rgba(255,255,255,.045);
      --border:rgba(255,255,255,.12);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.70);
      --mint:#2fe3b7;
      --mint2:rgba(47,227,183,.18);
      --shadow:0 18px 45px rgba(0,0,0,.35);
      --radius:18px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 20% 0%, rgba(47,227,183,.10), transparent 60%),
        radial-gradient(900px 600px at 70% 20%, rgba(100,180,255,.10), transparent 55%),
        linear-gradient(180deg,var(--bg0),var(--bg2));
      min-height:100vh;
    }

    .wrap{max-width:980px;margin:0 auto;padding:22px 16px 40px}

    /* NAV */
    .nav{
      display:flex; align-items:center; justify-content:space-between;
      gap:14px; padding:12px 14px;
      background:rgba(0,0,0,.25);
      border:1px solid var(--border);
      border-radius:999px;
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      position:sticky; top:10px; z-index:10;
    }
    .brand{display:flex; align-items:center; gap:10px; text-decoration:none; color:var(--text)}
    .brand img{width:28px;height:28px;border-radius:999px}
    .brand b{letter-spacing:.2px}
    .brand small{display:block;color:var(--muted);font-weight:500;margin-top:1px}

    .navLinks{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}
    .navLinks a{
      color:var(--muted);
      text-decoration:none;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid transparent;
    }
    .navLinks a:hover{
      color:var(--text);
      border-color:var(--border);
      background:rgba(255,255,255,.04);
    }

    /* HERO */
    .hero{padding:22px 4px 8px}
    h1{margin:14px 0 10px; font-size: clamp(28px, 4vw, 44px); line-height:1.08}
    .lead{color:var(--muted); font-size: clamp(15px, 1.8vw, 18px); line-height:1.5; margin:0 0 14px}

    .chipRow{display:flex; gap:10px; flex-wrap:wrap; margin:10px 0 18px}
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background:rgba(0,0,0,.25);
      border:1px solid var(--border);
      color:var(--muted);
    }
    .dot{width:10px;height:10px;border-radius:999px;background:var(--mint); box-shadow:0 0 0 6px var(--mint2)}

    /* CARDS */
    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:14px;
      margin-top:10px;
    }
    @media (max-width:860px){ .grid{grid-template-columns:1fr} }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow: var(--shadow);
      padding:18px;
    }
    .card h2{margin:0 0 8px; font-size:20px}
    .muted{color:var(--muted)}
    .hr{height:1px;background:rgba(255,255,255,.10); margin:14px 0}

    label{display:block; color:var(--muted); font-size:14px; margin:12px 0 8px}
    input{
      width:100%;
      padding:14px 14px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(0,0,0,.25);
      color:var(--text);
      outline:none;
      font-size:16px;
    }
    input:focus{border-color:rgba(47,227,183,.6); box-shadow:0 0 0 6px rgba(47,227,183,.12)}
    .row{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
    .btn{
      appearance:none; border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.06);
      color:var(--text);
      border-radius:999px;
      padding:12px 14px;
      cursor:pointer;
      font-weight:600;
      text-decoration:none;
      display:inline-flex; align-items:center; justify-content:center;
      gap:10px;
    }
    .btn.primary{background: linear-gradient(180deg, rgba(47,227,183,.22), rgba(47,227,183,.10)); border-color: rgba(47,227,183,.40)}
    .btn:hover{border-color:rgba(255,255,255,.28); background:rgba(255,255,255,.08)}
    .btn.primary:hover{border-color:rgba(47,227,183,.58)}
    .btn:disabled{opacity:.5; cursor:not-allowed}

    .box{
      background: rgba(0,0,0,.22);
      border:1px dashed rgba(255,255,255,.22);
      border-radius: 14px;
      padding:12px 12px;
      color:var(--muted);
    }

    .ok{color:#aef7df}
    .warn{color:#ffd9a8}
    .err{color:#ffb2b2}

    footer{
      margin-top:22px;
      padding:18px 10px;
      color:var(--muted);
      text-align:center;
    }
    footer .footLinks{
      display:flex; gap:14px; justify-content:center; flex-wrap:wrap;
      margin-bottom:10px;
    }
    footer a{color:var(--muted); text-decoration:none}
    footer a:hover{color:var(--text); text-decoration:underline}
    .tiny{font-size:12px; color:rgba(255,255,255,.55)}
    code{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}
  </style>
</head>

<body>
  <div class="wrap">

    <nav class="nav" aria-label="SafeShare Navigation">
      <a class="brand" href="index.html">
        <img src="assets/icons/icon-32-kreis.png" alt="SafeShare Logo" />
        <div>
          <b>SafeShare</b>
          <small>Pro – Aktivierung</small>
        </div>
      </a>
      <div class="navLinks">
        <a href="index.html">Start</a>
        <a href="app.html">App</a>
        <a href="pro.html">Pro</a>
        <a href="help.html">Hilfe</a>
      </div>
    </nav>

    <header class="hero">
      <h1>SafeShare Pro aktivieren</h1>
      <p class="lead">
        Lizenz-Key eingeben → lokal im Browser freischalten → Pro App öffnen.
        (Ohne Konto, ohne Server-Login – local-first.)
      </p>

      <div class="chipRow">
        <span class="chip"><span class="dot"></span><span id="planChip">Plan: automatisch</span></span>
        <span class="chip">Key wird lokal gespeichert</span>
        <span class="chip">Für Profis: Audit · Whitelist · Presets</span>
      </div>
    </header>

    <section class="grid">
      <div class="card">
        <h2>1) Lizenz-Key eingeben</h2>
        <p class="muted">
          Dein Key kommt von Payhip (Kaufbestätigung / Download-Seite). Wenn du über den Payhip-Redirect hier gelandet bist, passt das trotzdem.
        </p>

        <label for="licenseKey">Lizenz-Key</label>
        <input id="licenseKey" inputmode="text" autocomplete="off" spellcheck="false"
               placeholder="z. B. aus Payhip: XXXX-XXXX-XXXX-XXXX" />

        <div class="row">
          <button class="btn primary" id="btnActivate">Freischalten</button>
          <button class="btn" id="btnClear" type="button">Zurücksetzen</button>
          <a class="btn" href="https://payhip.com/account/purchases" target="_blank" rel="noopener">Payhip Käufe öffnen</a>
        </div>

        <div class="hr"></div>

        <div class="box" id="statusBox">
          Status: <span class="muted">Noch nicht freigeschaltet.</span>
        </div>

        <div class="row" style="margin-top:12px">
          <a class="btn primary" id="btnOpenProApp" href="pro-app.html" style="display:none">Pro App öffnen</a>
          <a class="btn" id="btnWhereHandbook" href="https://payhip.com/account/purchases" target="_blank" rel="noopener" style="display:none">
            Handbuch (PDF) in Payhip öffnen
          </a>
        </div>

        <p class="tiny" style="margin-top:12px">
          Hinweis: Ohne Server kann SafeShare Pro nicht “hart” prüfen, ob ein Key bezahlt wurde. Der Key dient hier als
          professioneller Aktivierungsschritt und als klarer Flow für Käufer.
        </p>
      </div>

      <aside class="card">
        <h2>2) Was du jetzt bekommst</h2>
        <p class="muted" id="planText">
          Standard: Pro Person (oder Team, wenn du das gewählt hast).
        </p>

        <div class="hr"></div>

        <h3 style="margin:0 0 8px; font-size:16px">Downloads</h3>
        <p class="muted" style="margin-top:0">
          Das Pro-Handbuch liegt als PDF in deinem Payhip-Download. (Du kannst es beliebig oft öffnen, auch offline.)
        </p>

        <div class="box">
          <div><b>Empfohlen</b></div>
          <div class="muted">In Payhip: Datei <code>01_…Handbuch…pdf</code> herunterladen.</div>
        </div>

        <div class="hr"></div>

        <h3 style="margin:0 0 8px; font-size:16px">Wenn etwas “alt” wirkt</h3>
        <p class="muted" style="margin-top:0">
          Falls der Browser noch eine alte Version cached:
        </p>
        <div class="row">
          <a class="btn" href="status.html">Status / Update</a>
          <a class="btn" href="help.html">Hilfe</a>
        </div>

        <p class="tiny" style="margin-top:12px">
          Support: <a href="mailto:support.safeshare@proton.me">support.safeshare@proton.me</a>
        </p>
      </aside>
    </section>

    <footer>
      <div class="footLinks">
        <a href="index.html">Start</a>
        <a href="app.html">App</a>
        <a href="pro.html">Pro</a>
        <a href="datenschutz.html">Datenschutz</a>
        <a href="impressum.html">Impressum</a>
      </div>
      <div class="tiny">SafeShare Pro – local-first. Links teilen. Ohne Ballast.</div>
    </footer>

  </div>

  <script>
    (function(){
      const $ = (id) => document.getElementById(id);

      const KEY_STORAGE = 'ss_pro_key';
      const PRO_STORAGE = 'ss_pro_activated';
      const PLAN_STORAGE = 'ss_pro_plan';
      const TS_STORAGE = 'ss_pro_activated_at';

      function getPlanFromUrl(){
        const p = new URLSearchParams(location.search);
        const raw = (p.get('plan') || '').toLowerCase().trim();
        if (raw === 'team' || raw === 'personal') return raw;
        return 'auto';
      }

      function normalizeKey(k){
        return (k || '').trim().replace(/\s+/g,'');
      }

      // sehr milde Plausibilitätsprüfung (Payhip Keys können variieren)
      function looksPlausible(k){
        const key = normalizeKey(k);
        if (key.length < 10) return false;
        // erlaubt A-Z 0-9 und -
        return /^[A-Za-z0-9-]+$/.test(key);
      }

      function setUIActivated(key, plan){
        $('statusBox').innerHTML =
          'Status: <span class="ok"><b>Freigeschaltet.</b></span> ' +
          '<span class="muted">Key gespeichert (nur in diesem Browser).</span>';

        $('btnOpenProApp').style.display = 'inline-flex';
        $('btnWhereHandbook').style.display = 'inline-flex';

        const planLabel = plan === 'team' ? 'Team' : (plan === 'personal' ? 'Person' : 'automatisch');
        $('planChip').textContent = 'Plan: ' + planLabel;

        $('planText').textContent =
          plan === 'team'
            ? 'Plan: Pro Team. (Für Teams/Agenturen/Redaktionen.)'
            : (plan === 'personal'
                ? 'Plan: Pro Person. (Einzel-Lizenz.)'
                : 'Plan: automatisch. (Wenn du Team gekauft hast, ist das ok – der Key ist entscheidend.)');

        // optional: Key im Feld maskiert anzeigen
        $('licenseKey').value = key;
      }

      function setUINotActivated(plan){
        $('statusBox').innerHTML =
          'Status: <span class="muted">Noch nicht freigeschaltet.</span>';
        $('btnOpenProApp').style.display = 'none';
        $('btnWhereHandbook').style.display = 'none';

        const planLabel = plan === 'team' ? 'Team' : (plan === 'personal' ? 'Person' : 'automatisch');
        $('planChip').textContent = 'Plan: ' + planLabel;

        $('planText').textContent =
          plan === 'team'
            ? 'Plan: Pro Team. (Für Teams/Agenturen/Redaktionen.)'
            : (plan === 'personal'
                ? 'Plan: Pro Person. (Einzel-Lizenz.)'
                : 'Plan: automatisch. Du kannst einfach deinen Key eingeben.');
      }

      // init
      const plan = getPlanFromUrl();
      setUINotActivated(plan);

      // restore existing activation
      const wasActivated = localStorage.getItem(PRO_STORAGE) === '1';
      const storedKey = localStorage.getItem(KEY_STORAGE) || '';
      const storedPlan = localStorage.getItem(PLAN_STORAGE) || plan;

      if (wasActivated && storedKey){
        setUIActivated(storedKey, storedPlan);
      }

      $('btnActivate').addEventListener('click', () => {
        const key = normalizeKey($('licenseKey').value);

        if (!looksPlausible(key)){
          $('statusBox').innerHTML =
            'Status: <span class="err"><b>Key wirkt ungültig.</b></span> ' +
            '<span class="muted">Bitte aus Payhip kopieren (mind. 10 Zeichen, nur Buchstaben/Zahlen/Minus).</span>';
          return;
        }

        localStorage.setItem(KEY_STORAGE, key);
        localStorage.setItem(PRO_STORAGE, '1');
        localStorage.setItem(PLAN_STORAGE, plan === 'auto' ? 'auto' : plan);
        localStorage.setItem(TS_STORAGE, new Date().toISOString());

        setUIActivated(key, plan === 'auto' ? 'auto' : plan);
      });

      $('btnClear').addEventListener('click', () => {
        localStorage.removeItem(KEY_STORAGE);
        localStorage.removeItem(PRO_STORAGE);
        localStorage.removeItem(PLAN_STORAGE);
        localStorage.removeItem(TS_STORAGE);
        $('licenseKey').value = '';
        setUINotActivated(plan);
      });

    })();
  </script>
</body>
</html>
