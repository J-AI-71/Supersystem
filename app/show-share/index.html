<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="robots" content="noindex,nofollow">
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
  <title>SafeShare â€“ Share</title>
</head>
<body>
<script>
(function(){
  const qs = new URLSearchParams(location.search);
  const url  = qs.get('url')  || '';
  const text = qs.get('text') || '';
  const title = qs.get('title') || '';

  // 1) Kandidat bestimmen (url > erste URL in text)
  let candidate = url || (text.match(/https?:\/\/\S+/)?.[0] || '');

  // 2) typische Endzeichen abschneiden
  candidate = candidate.replace(/[)\],.]+$/, '');

  // 3) Weiter in App mit ?url=
  const target = new URL('/app/', location.origin);
  if (candidate) target.searchParams.set('url', candidate);

  // optional: wenn nur Text ohne URL geteilt wurde, kannst du ihn mitschicken
  if (!candidate && (text || title)) target.searchParams.set('text', (text || title));

  location.replace(target.toString());
})();
</script>
</body>
</html>
