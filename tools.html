<!doctype html><html lang="de"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>SafeShare – Tools</title>
<link rel="icon" href="favicon-32.png">
<style>
body{margin:16px;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif}
.btn{display:inline-block;border:1px solid #e5e7eb;border-radius:10px;padding:10px 12px;background:#fff;color:#111827;text-decoration:none;margin-right:8px}
pre{background:#f8fafc;border:1px solid #e5e7eb;border-radius:8px;padding:8px;overflow:auto}
</style></head><body>
<h1>Tools</h1>
<p><button class="btn" id="btnSw">Alle Service Worker abmelden</button>
<button class="btn" id="btnCache">Alle Caches löschen</button>
<a class="btn" href="app.html?v=154">App laden</a></p>
<pre id="log">bereit…</pre>
<script>
(async()=>{
  const log = s => document.getElementById('log').textContent += '\n' + s;
  document.getElementById('btnSw').onclick = async ()=>{
    if('serviceWorker' in navigator){
      const regs = await navigator.serviceWorker.getRegistrations();
      for(const r of regs){ await r.unregister(); log('SW abgemeldet: ' + (r.scope||'')); }
      if(!regs.length) log('Keine SW gefunden.');
    }else log('Kein SW-Unterstützung.');
  };
  document.getElementById('btnCache').onclick = async ()=>{
    if('caches' in window){
      const keys = await caches.keys();
      await Promise.all(keys.map(k=>caches.delete(k)));
      log('Caches gelöscht: ' + (keys.join(', ')||'–'));
    }else log('Kein Cache-API.');
  };
})();
</script>
</body></html>