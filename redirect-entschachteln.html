<!doctype html>
<html lang="de">
<head>
  <!-- redirect-entschachteln.html (neu, ohne Inline-JS) -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <base href="/Supersystem/">
  <title>Redirect entschachteln · SafeShare</title>

  <!-- Canonical / hreflang -->
  <link rel="canonical" href="https://j-ai-71.github.io/Supersystem/redirect-entschachteln.html">
  <link rel="alternate" href="https://j-ai-71.github.io/Supersystem/redirect-entschachteln.html" hreflang="de">
  <link rel="alternate" href="https://j-ai-71.github.io/Supersystem/redirect-entschachteln.html" hreflang="x-default">
  <meta name="description" content="Entpackt Weiterleitungs-Links (Google, Facebook, Reddit usw.) und zeigt die echte Ziel-URL. Optional Trackingparameter entfernen.">
  <meta name="robots" content="index,follow">
  <meta property="og:locale" content="de_DE">

  <!-- Sanfte CSP – kein Inline-JS -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 base-uri 'self';
                 form-action 'self';
                 frame-ancestors 'none';
                 object-src 'none';
                 img-src 'self' data:;
                 style-src 'self' 'unsafe-inline';
                 script-src 'self';
                 font-src 'self';
                 worker-src 'self';
                 manifest-src 'self';
                 connect-src 'self'">

  <!-- Icons / Manifest -->
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icons/apple-touch-icon-180.png?v=30">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/icon-32-kreis.png?v=30">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/icon-16-kreis.png?v=30">
  <link rel="manifest" href="manifest.webmanifest?v=30">

  <!-- Styles -->
  <style>
    :root{
      --bg:#0b0b0b; --fg:#eaeaea; --mut:#9a9a9a; --line:#2a2a2a;
      --card:#121212; --btn:#1b1b1b; --ok:#1e402f;
    }
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,sans-serif}
    a{color:#cfe7ff}
    .wrap{max-width:980px;margin:0 auto;padding:22px 14px}
    .mut{color:var(--mut)}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
    h1{margin:.2em 0 .6em;font-size:1.9rem}
    h2{margin:1.0em 0 .35em;font-size:1.15rem}
    .card{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:14px;margin-top:12px}
    .row{display:flex;flex-wrap:wrap;gap:8px}
    .btn{display:inline-block;border:1px solid var(--line);background:var(--btn);color:var(--fg);
         padding:.6rem .9rem;border-radius:10px;cursor:pointer;text-decoration:none}
    .btn.ok{background:var(--ok)}
    .pill{display:inline-block;border:1px solid var(--line);border-radius:999px;padding:.1rem .5rem;margin:.1rem .25rem 0 0}
    input[type="text"],textarea{width:100%;box-sizing:border-box;background:#0f0f0f;border:1px solid var(--line);
         color:var(--fg);border-radius:10px;padding:.6rem .7rem}
    label{user-select:none}
    footer{margin:18px 0}
    .visually-hidden-focusable{position:absolute;left:-9999px}
    .visually-hidden-focusable:focus{left:10px;top:10px;z-index:1000;background:#222;padding:.4rem .6rem;border-radius:8px}
  </style>

  <!-- CSS (falls vorhanden) -->
  <link rel="stylesheet" href="css/theme.css?v=30">

  <!-- SW-Registrierung + Seiten-Skripte (NEU, keine Inline-Handler) -->
  <script defer src="js/sw-register.js?v=30"></script>
  <script defer src="js/cleaner.js?v=30"></script>
  <script defer src="js/page-redirect.js?v=30"></script>
</head>
<body>
  <a href="#main" class="visually-hidden-focusable">Zum Inhalt springen</a>
  <div class="wrap">
    <header>
      <h1>Redirect entschachteln</h1>
      <p class="mut">Ziel-URL aus Weiterleitungs-Links extrahieren und optional Tracking-Parameter entfernen.</p>
    </header>

    <main id="main">
      <section class="card" aria-labelledby="eingabe">
        <h2 id="eingabe">Eingabe</h2>
        <label for="inUrl" class="mut">Weiterleitungs-Link einfügen</label>
        <input id="inUrl" type="text" name="url" placeholder="z. B. https://www.google.com/url?q=https%3A%2F%2Fexample.com%2F…" autocomplete="off" inputmode="url" spellcheck="false" aria-describedby="hint">
        <p id="hint" class="mut mono" style="margin:.4rem 0 0">Enter = Entschachteln</p>

        <div class="row" style="margin-top:.7rem">
          <label class="mut"><input id="optClean" type="checkbox" checked> Tracking-Parameter zusätzlich entfernen</label>
        </div>

        <div class="row" style="margin-top:.7rem">
          <button id="btnUnwrap" class="btn ok" type="button" aria-label="Entschachteln">Entschachteln</button>
          <button id="btnCopy"   class="btn"    type="button" aria-label="Ergebnis kopieren">Kopieren</button>
          <button id="btnOpen"   class="btn"    type="button" aria-label="Ergebnis öffnen">Öffnen</button>
          <a class="btn" href="app.html" aria-label="In App öffnen (weiterverarbeiten)">In App</a>
        </div>
      </section>

      <section class="card" aria-labelledby="ausgabe">
        <h2 id="ausgabe">Ausgabe</h2>
        <label for="outUrl" class="mut">Ergebnis-URL</label>
        <input id="outUrl" type="text" readonly class="mono" placeholder="—">
      </section>

      <section class="card" aria-labelledby="schritte">
        <h2 id="schritte">Schritte</h2>
        <div id="steps" class="mut">Noch keine Analyse.</div>
      </section>

      <section class="card" aria-labelledby="aenderungen">
        <h2 id="aenderungen">Änderungen</h2>
        <div id="changes" class="mut">–</div>
      </section>
    </main>

    <footer class="mut">
      <a href="index.html">Startseite</a> ·
      <a href="app.html">App</a> ·
      <a href="bookmarklets.html">Bookmarklet</a> ·
      <a href="bulk-clean.html">Bulk-Clean</a> ·
      <a href="team-setup.html">Team-Setup</a> ·
      <a href="help.html">Hilfe</a> ·
      <a href="status.html">Status</a> ·
      <a href="impressum.html">Impressum</a> ·
      <a href="datenschutz.html">Datenschutz</a> ·
      <a href="press.html">Presse</a>
    </footer>
  </div>

  <noscript>
    <div class="wrap"><p class="mut">JavaScript ist erforderlich, um Redirects zu entschachteln.</p></div>
  </noscript>
</body>
</html>
