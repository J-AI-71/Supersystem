<!doctype html><html lang="de"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<base href="/Supersystem/"><title>Status · SafeShare</title>
<link rel="icon" href="assets/logo.png?v=2025-11-13-07">
<style>
body{margin:0;background:#0b0b0b;color:#eaeaea;font:16px/1.5 system-ui}.w{max-width:860px;margin:auto;padding:24px 16px}
h1{margin:0 0 10px}.ok{color:#29c07e}.bad{color:#ff6b6b}.card{background:#111;border:1px solid #1f1f1f;border-radius:10px;padding:12px;margin-top:10px}
code{background:#000;padding:.1rem .3rem;border-radius:6px}
</style></head><body><div class="w">
<h1>Status</h1>
<div id="list" class="card">Prüfe …</div>
<p style="margin-top:8px"><a href="tools.html" class="ok">Tools</a> · <a href="index.html" class="ok">Start</a></p>
</div>
<script>
(async function(){
  const res=[];
  // 1) Base
  const expected = location.origin + '/Supersystem/';
  const actual = document.baseURI;
  res.push({name:'<base href>', ok: actual===expected, info:`${actual}`});

  // 2) Redirect-Datei erreichbar
  try{
    const r=await fetch('redirect-entschachteln.html',{cache:'no-store'});
    res.push({name:'redirect-entschachteln.html', ok:r.ok, info:`HTTP ${r.status}`});
  }catch(e){ res.push({name:'redirect-entschachteln.html', ok:false, info:String(e)}) }

  // 3) Alias erreichbar
  try{
    const r=await fetch('Redirect-entschachteln.html',{cache:'no-store'});
    res.push({name:'Redirect-entschachteln.html (Alias)', ok:r.ok, info:`HTTP ${r.status}`});
  }catch(e){ res.push({name:'Redirect-entschachteln.html (Alias)', ok:false, info:String(e)}) }

  // 4) Service Worker
  const sw = 'serviceWorker' in navigator;
  res.push({name:'Service Worker unterstützt', ok: sw, info: sw?'ja':'nein'});
  if(sw){
    const reg = await navigator.serviceWorker.getRegistration();
    res.push({name:'SW registriert', ok: !!reg, info: reg? (reg.active && reg.active.scriptURL):'—'});
    res.push({name:'SW kontrolliert Seite', ok: !!navigator.serviceWorker.controller, info: navigator.serviceWorker.controller?'ja':'nein'});
  }

  // 5) Manifest
  try{
    const r=await fetch('manifest.webmanifest',{cache:'no-store'});
    res.push({name:'Manifest', ok:r.ok, info:`HTTP ${r.status}`});
  }catch(e){ res.push({name:'Manifest', ok:false, info:String(e)}) }

  // 6) Bookmarklets-Quelle
  try{
    const r=await fetch('js/bookmarklets.js',{cache:'no-store'});
    res.push({name:'js/bookmarklets.js', ok:r.ok, info:`HTTP ${r.status}`});
  }catch(e){ res.push({name:'js/bookmarklets.js', ok:false, info:String(e)}) }

  // Render
  const el=document.getElementById('list'); el.innerHTML='';
  res.forEach(r=>{
    const p=document.createElement('p');
    p.innerHTML = `<strong>${r.name}:</strong> <span class="${r.ok?'ok':'bad'}">${r.ok?'OK':'Fehler'}</span> <span class="mut">— ${r.info}</span>`;
    el.appendChild(p);
  });
})();
if('serviceWorker' in navigator){ navigator.serviceWorker.register('./sw.js?v=2025-11-13-07'); }
</script></body></html>
